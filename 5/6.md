---
description: 建立應用、流程、排程、參數與服務水準
---

# 應用管理

## 應用設計

可在此建立自訂應用、流程，並上架給使用者使用。

{% hint style="info" %}
**本篇文章主要在介紹各個頁面的功能，如何從無到有的建立一個應用請參閱**[**快速上手**](../4/3.md#jian-li-ying-yong)**。**
{% endhint %}

### 應用列表

每個應用可視為擁有多個流程的容器，應用列表頁面功能介紹如下：

1. **新增**：新建自定義應用
2. **刪除**：刪除勾選的應用
3. **上架**：上架一個已經設計完成的應用
4. **篩選**：透過關鍵字搜尋、篩選屬性、一次顯示資料筆數
5. **還原**：將篩選還原成預設值
6. **匯入**：匯入舊有應用
7. **匯出**：將勾選的應用匯出
8.  **雲端下載**：下載官方提供的雲端應用，屬於下列情況時可使用：

    (1) 當版本更新時需要同步下載對應的內建流程

    (2) 官方釋出新的套件應用

{% hint style="info" %}
新增應用後可在應用列表的最右側看到設定按鈕，按下設定可以修改應用名稱與分權設定。

分權設定：

讓指定角色在不給予**應用管理權限**的情況下，能夠編輯、上架該應用。
{% endhint %}

### 流程列表

點擊應用列表任一個應用，進入流程列表頁面。

{% hint style="info" %}
**在此列表中所看到的流程後續統稱主流程，以便與**[**子流程**](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-zi-liu-cheng)**區別。**
{% endhint %}

流程列表功能介紹：

1. **新增**：新建一個流程
2. **複製**：複製勾選的流程至另一個應用
3. **刪除**：刪除一個流程
4. **篩選**：透過關鍵字搜尋、一次顯示資料筆數
5. **還原**：將篩選還原成預設值
6. **套件：**表列該應用所有流程需要的套件
7. **語言**：匯入、匯出翻譯後的語言包

### 新建/編輯流程頁面-參數設定

點擊新增或流程列表，進入流程新建/編輯頁面。

1. **流程名稱**：流程名稱(上架後無法更動)
2. **API路徑**：外部系統呼叫時使用的路徑(上架後無法更動)。
3. **說明**：說明該流程的作用。
4. **執行過程記錄**：是否紀錄流程每個點的輸入與輸出。
5. **應用程式介面**：是否允許該流程被其他功能、系統透過API呼叫。
6. **是否建立任務**：是否在我的任務頁面看到該流程所產生的資料。（請參閱[我的任務](2.md)）
7. **查看目前流程及進度**：是否在表單顯示出該功能按鍵。
8. **檢視表單資料操作歷程**：是否在表單顯示出該功能按鍵。
9. **附加檔案功能**：是否在表單顯示出該功能按鍵。
10. **顯示資料關聯**：是否在表單顯示出該功能按鍵。
11. **填寫及顯示工作日誌**：是否在表單顯示出該功能按鍵。
12. **表單內快速操作確認視窗：**當使用者在表單內使用快速操作時，是否彈出確認視窗。

上述第7\~12項請參閱[自訂應用](7.md)

### 新建/編輯流程頁面-權限設定

列表顯示有哪些角色擁有該流程的權限。

* **新增**：新增一個已存在的角色，並將此流程的權限給予這個角色。
* **刪除**：將此流程的權限從勾選的角色中移除。

角色與權限的設定請參閱[人員管理](8.md#jiao-se-guan-li)，並有以下幾點須注意：

* **檢視(權限)**：_**主選單 > 自訂應用**_ 中將出現此流程，並能檢視流程所有的單。
* **新增(權限)**：可以建立該流程的表單。
* **更新(權限)**：表單進入人工輸入時，可推動表單進行下一步驟。
* **刪除(權限)**：可以刪除該流程的表單。

{% hint style="info" %}
**權限需搭配使用，如果只有新增權限沒有檢視權限，使用者會因無法看到該流程導致無法新增資料。**
{% endhint %}

****

**進階設定：**

在某些特定情況下，希望使用者只能看到某些特定的單，此時就能使用進階設定的表單檢視規則。

**一、檢視所有**

即使在限制的情況下，也會需要類似管理員的角色出現，這些人要能檢視該流程的全部資料，此時就是在該項目下選擇指定的組織、角色、使用者。

**二、符合個人資訊**

此類型較常使用於資產單，例如當受派人等於使用者的名稱時，該使用者才能看到該筆單。

**三、符合條件**

最後則是當指定欄位符合條件時，後方選擇的組織、角色、使用者可以看到該筆單。

使用的範例情境如：\
當狀態是**處理中**，只有**工程師**能看到。\
當狀態是**審核中**，只有**主管**能看到。

{% hint style="info" %}
上述三種檢視規則，其每條規則都是各自成立，也就是說，當使用者符合任一條規則時，他就能看到該筆單。
{% endhint %}

### 新建/編輯流程頁面-表單設計

設計欄位讓使用者填寫，並帶入流程中計算、運用。

{% hint style="info" %}
**表單並非一定要設計，若該流程不需讓使用者填寫資訊也可以留空。**
{% endhint %}

區塊功能介紹：

1. **新增欄位(+)**：在區塊中新增欄位。
2. **設定(齒輪)**：設定區塊。
3. **刪除(X)**：刪除區塊。

區塊可進行下列設定：

* **標題文字**：區塊的標題文字
* **標示顏色**：區塊上方直線的顏色
* **隱藏**：是否隱藏整個區塊

{% hint style="info" %}
若設計者有某些資訊想要放置在表單中，但是不想讓使用者看到或是修改，就會將這寫欄位放置某個區塊中，並將整個區塊隱藏。
{% endhint %}

**欄位設定：**

欄位的設定會因項目不同而有所不同，目前欄位有下列幾種：

#### 一、輸入方塊

* **欄位名稱**：欄位顯示的名稱
* **註解說明**：欄位的說明，以placeholder的方式顯示。
* **預設值**：預設帶入欄位的值
* **類型**：分為文字、數字、密碼、唯一值、網址、電子郵件
* **格式檢查**：輸入regex語法後，使用者填寫該欄位時，系統會依照該語法檢查內容是否符合，不符合會拒絕使用者的操作。
* **必填**：當資料被建立或推進時會檢查必填欄位，若值為空則會拒絕操作。
* **唯讀**：勾選後使用者對於此欄位只能看不能改。
* **隱藏**：將該欄位隱藏起來。（類似於區塊的隱藏，但是這裡只隱藏單個欄位）

#### 二、多行輸入

* **行數**：該項調整通常是為了表單編排的美觀，並不會限制使用者輸入的內容長度。如果使用者打的內容超過了設定，欄位會旁邊會出現下拉捲軸。

#### 三、下拉選單

下拉選單多出了一個選項的頁籤，可以新增刪除選項。按住`↕︎`可以拖動選項。

{% hint style="info" %}
_**值**_ 是給系統運算使用的，_**顯示文字**_ 則是顯示給使用者看的。

下拉選單的預設值，填入的是_**值**_ 而非_**顯示文字**_。
{% endhint %}

{% hint style="info" %}
**複選的預設值請以半形逗號分隔。**

**例：1,2,3,4**
{% endhint %}

#### 四、單選/複選選單

單選與複選是同一個項目，設定種有複選的選項可以勾選，預設為單選。

{% hint style="info" %}
**複選的預設值請以半形逗號分隔。**

**例：1,2,3,4**
{% endhint %}

#### 五、標題

類似於**輸入方塊**，但是標題會在[我的任務](2.md)列表中使用。

#### 六、狀態

類似於**下拉選單**，但是**狀態**會在[我的任務](2.md)列表中使用。

#### 七、燈號

類似於**下拉選單**，但是只有紅、黃、綠燈三個固定選項，同樣會在[我的任務](2.md)列表中使用。

如果有設計服務水準，燈號則會被服務水準控制，詳情請參閱[服務水準](6.md#fu-wu-shui-zhun-guan-li)

#### 八、受派人及組織

特殊的組合欄位，此欄位與[使用者](8.md#shi-yong-zhe-guan-li)、[組織](8.md#xin-zeng-shi-yong-zhe)連動，需先行建立才能在欄位中選擇。

* 包含受派人欄位：如果將此勾選清除，則該欄位會只剩組織可填。

此欄位會影響到我的任務的建立，當指派只到組織階層時，該組織的所有成員皆會在[任務列表](2.md)中看到該筆資料；當指派到受派人階層時，只有該使用者可以在[任務列表](2.md)中看到。

{% hint style="info" %}
**當使用者/組織被指派時，即使沒有該**[**流程的權限**](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-quan-xian-she-ding)**，也可以進行推單的動作。**
{% endhint %}

#### 九、日期

點擊輸入匡之後，會跳出日曆可以進行選擇。

#### 十、日期/時間

類似於**日期**，但是會有時間可以選。

#### 十一、子查詢

設定查詢其他表單，並將使用者所選擇表單的特定欄位回填。

首先在表單頁籤選擇要查詢的應用、流程

條件、動態條件頁籤進行初步篩選，避免使用者看到一些垃圾資料

條件頁籤輸入的是固定值，動態條件則是會取得當下表單的欄位或是當下的使用者資料。

回填頁籤則是，當使用者選定資料後，將該筆資料的欄位值回填至本單的指定欄位中



#### 十二、運算輸入

將其他欄位的內容經過運算，最終填入運算欄位。

{% hint style="danger" %}
運算輸入在**OMFLOW 1.1.2.2**版時隱藏，後續版本無法再新增此欄位。
{% endhint %}

{% hint style="info" %}
範例情境：

訂購表單中有兩個欄位 -- 價格、數量。

使用者希望當他填入價格與數量後，自動將總價計算出來。
{% endhint %}

步驟一、點開運算欄位設定。

步驟二、插入變數欄位下拉選單，選擇**欄位:價格**。

步驟三、點擊**插入**按鈕，該變數會跑到上方的運算內容方格中。

步驟四、在運算內容中，剛才插入得變數後方輸入一個 **\*** (乘法運算符)，接著再將**欄位:數量**插入至運算內容中，完成運算欄位。

完成後，當使用者開單時，在兩個欄位都輸入內容後，運算欄位會依照設定好的公式進行運算，並回填欄位內容。



#### 十三、組織

下拉選單選擇已經建立的組織，可以設定複選。

{% hint style="info" %}
**複選的預設值請以半形逗號分隔。**

**例：org1,org2,org3,org4**
{% endhint %}

#### 十四、使用者

下拉選單選擇已經建立的使用者，可以設定複選。

{% hint style="info" %}
**複選的預設值請以半形逗號分隔。**

**例：user1,user2,user3,user4**
{% endhint %}

#### 十五、提示

提醒、警語用欄位，該欄位內容無法被使用者編輯，同樣也無法被流程所使用。\


### 新建/編輯流程頁面-欄位計算規則

將其指定欄位的內容經過運算，最終填入其他指定欄位。

{% hint style="danger" %}
運算規則只會在前端介面進行觸發，流程中修改欄位值或進行欄位回填時，不會觸發這些計算條件。
{% endhint %}

點擊新增可以新增運算規則。每條規則的最右側有設定與刪除按鈕。

點擊設定按鈕後，可以看到下列幾個頁籤：

**設定：**

進到設定畫面後，可以針對這條規則修改名稱以及新增註解。

**觸發欄位：**

點擊新增來新增觸發欄位。

當使用者填寫表單時，當觸發欄位的值被更動時，就會去檢查觸發條件。

**觸發條件：**

當觸發條件達成時，才會開始進行運算。若觸發條件為空，則會直接進行運算。

**運算：**

運算類型分為四種：數字、日期、日期時間、日期指定時間。

數字的運算邏輯可以參考[欄位設計的運算輸入](6.md#shi-er-yun-suan-shu-ru)。

日期類型只能選擇[日期欄位](6.md#liu-cheng-lie-biao)來進行日期的加減運算。

日期/時間類型只能選擇[日期/時間欄位](6.md#liu-cheng-lie-biao)進行日期與時間的加減運算。

日期指定時間類型比較特殊，這裡只做日期的加減運算，時間則會固定成指定的時間。

{% hint style="info" %}
範例如下：

開始時間為 2021-01-01 08:00:00\
運算字元為 + \
下方的運算時間為 0-1-1 01:30:00

日期時間類型的結果為：\
2021-02-02 09:30:00

日期/指定時間類型的結果為：\
2021-02-02 01:30:00
{% endhint %}

**回填：**

將運算完的結果回填至指定欄位。



### 新建/編輯流程頁面-流程設計

進入流程設計頁面會看到一個預設的流程，該流程可以直接使用。

先定義一些名詞，點選元件會看到元件上多出了一些功能鍵。下圖數字分別代表以下功能：

1. 設定：設定這個元件
2. 複製：複製這個元件（包含設定完的參數）
3. 刪除：刪除這個元件（包含元件連接出去的線）
4. 連接點：連接其他元件

![](../.gitbook/assets/jie-tu-20200715-xia-wu-5.13.35.png)

接下來會一一介紹所有元件：

#### 開始

顧名思義，一個流程的源頭，建議在此建立流程變數以供後續元件使用。

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。
{% endtab %}

{% tab title="輸入" %}
將欄位值或是固定字串寫入變數中，在此建立的變數為**流程變數**，後續所有的元件都可以使用這些變數。

這裡會看到有一個預設的輸入，result=success，其目的在驗證頁籤說明。
{% endtab %}

{% tab title="驗證" %}
選擇一個子流程來驗證輸入的資料。當驗證失敗時（子流程回傳result不等於success），此次開單失敗，且不會留下任何紀錄。

此功能有兩大目的：

一、檢查輸入的資料是否正確。

二、過濾資料。
{% endtab %}

{% tab title="驗證輸入" %}
所選的驗證流程的開始點輸入欄位會自動帶入這裡（如果驗證頁籤沒選擇則該處為空）。
{% endtab %}
{% endtabs %}

#### 結束

一個流程的結束，只有當流程進行到此元件時，才會進行關單動作（關閉任務、結束SLA監控...等），當流程被其他流程所呼叫時，也只有進行到結束元件時會回傳執行結果。

{% hint style="info" %}
一般情況下，應讓流程順利執行至結束元件。
{% endhint %}

當流程屬於下列幾種情況時請務必連接至結束元件，否則流程會無法順利完成：

1. 當流程為子流程時
2. 當流程會被其他流程呼叫時
3. 當流程為[資料收集](5.md)流程時

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。
{% endtab %}

{% tab title="篩選" %}
篩選大致分為三個方面：

一、對現有變數做置換、取長度等，例如：轉成大寫、取開頭字元...

二、取得系統的一些預設欄位，例如：開單人、取得單號...

三、從[參數管理](6.md#can-shu-guan-li)取得系統參數

{% hint style="danger" %}
**篩選所建立的變數，只有當前元件能使用，並非流程變數！！！**
{% endhint %}
{% endtab %}

{% tab title="輸出" %}
當流程符合上面三種情況時，將變數進行輸出回主流程或資料中心。
{% endtab %}
{% endtabs %}

#### 人工輸入

一旦流程執行到這裡，會停下來讓使用者檢閱、填寫資料並推進（可透過前端介面或是API推進）。

{% hint style="info" %}
進入人工輸入時，只有**手動推單**或**API推單**才能使流程繼續前進。
{% endhint %}

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。

紀錄Log：與[前面](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-can-shu-she-ding)介紹過的_**執行過程記錄**_作用相同，當_**執行過程記錄**_沒勾選時，全部元件上的紀錄Log都會失效，而紀錄Log只會影響到當前元件。
{% endtab %}

{% tab title="篩選" %}
篩選大致分為三個方面：

一、對現有變數做置換、取長度等，例如：轉成大寫、取開頭字元...

二、取得系統的一些預設欄位，例如：開單人、取得單號...

三、從[參數管理](6.md#can-shu-guan-li)取得系統參數

{% hint style="danger" %}
**篩選所建立的變數，只有當前元件能使用，並非流程變數！！！**
{% endhint %}
{% endtab %}

{% tab title="欄位設定" %}
在流程停下來時，修改資料庫中的欄位值，當使用者開啟表單後，會顯示已經被修該的內容。
{% endtab %}

{% tab title="自訂表單" %}
可選擇是否載入表單設計所設計的表單。

選擇載入後，可以針對當前呈現的表單進行修改——刪除或新增一些欄位成符合當下所需呈現給使用者的內容。

若不選擇載入，則會直接套用表單設計的表單。
{% endtab %}

{% tab title="驗證" %}
選擇一個子流程來驗證輸入的資料。當驗證失敗時（子流程回傳result不等於success），此次開單失敗，且不會留下任何紀錄。

此功能有兩大目的：

一、檢查輸入的資料是否正確。

二、過濾資料。
{% endtab %}

{% tab title="驗證輸入" %}
所選的驗證流程的開始點輸入欄位會自動帶入這裡（如果驗證頁籤沒選擇則該處為空）。
{% endtab %}

{% tab title="輸出" %}
類似於開始點的輸入，將使用者更新的欄位內容輸出成流程變數，以供後續元件使用。
{% endtab %}

{% tab title="動作1" %}
又稱為快速操作，設計完成後可在[我的任務](2.md#ren-wu-lie-biao)列表上使用，使用者可以不用進入表單畫面修改內容後再推進，使用時會依照該處的設計修該欄位值並推進流程。許多固定式的回覆、推進可透過該功能完成。

{% hint style="info" %}
**若要使用請記得將啟用的選項打勾。**
{% endhint %}
{% endtab %}

{% tab title="動作2" %}
同動作1
{% endtab %}
{% endtabs %}

#### 欄位設定

將變數或是固定字串填入資料庫中。當需要修改資料庫且不需經過人工處理時可選擇該元件。

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。

紀錄Log：與[前面](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-can-shu-she-ding)介紹過的_**執行過程記錄**_作用相同，當_**執行過程記錄**_沒勾選時，全部元件上的紀錄Log都會失效，而紀錄Log只會影響到當前元件。
{% endtab %}

{% tab title="篩選" %}
篩選大致分為三個方面：

一、對現有變數做置換、取長度等，例如：轉成大寫、取開頭字元...

二、取得系統的一些預設欄位，例如：開單人、取得單號...

三、從[參數管理](6.md#can-shu-guan-li)取得系統參數

{% hint style="danger" %}
**篩選所建立的變數，只有當前元件能使用，並非流程變數！！！**
{% endhint %}
{% endtab %}

{% tab title="欄位設定" %}
將變數或字串回填資料。
{% endtab %}

{% tab title="輸出" %}
類似於開始點的輸入，將使用者更新的欄位內容輸出成流程變數，以供後續元件使用。
{% endtab %}
{% endtabs %}

#### 欄位/變數篩選

將變數或是欄位進行簡單的置換或是取得系統參數與預設欄位，再輸出給其他流程元件使用。

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。

紀錄Log：與[前面](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-can-shu-she-ding)介紹過的_**執行過程記錄**_作用相同，當_**執行過程記錄**_沒勾選時，全部元件上的紀錄Log都會失效，而紀錄Log只會影響到當前元件。
{% endtab %}

{% tab title="篩選" %}
篩選大致分為三個方面：

一、對現有變數做置換、取長度等，例如：轉成大寫、取開頭字元...

二、取得系統的一些預設欄位，例如：開單人、取得單號...

三、從[參數管理](6.md#can-shu-guan-li)取得系統參數

{% hint style="danger" %}
**篩選所建立的變數，只有當前元件能使用，並非流程變數！！！**
{% endhint %}
{% endtab %}

{% tab title="輸出" %}
將篩選後的變數輸出給其他元件使用。
{% endtab %}
{% endtabs %}

#### 呼叫流程

呼叫一個同應用底下的其他流程，當該流程進入結束時，本流程才會進續前進。

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。

異常時通過：當流程執行到該元件發生錯誤時，是否忽略錯誤使流程繼續往下進行。

紀錄Log：與[前面](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-can-shu-she-ding)介紹過的_**執行過程記錄**_作用相同，當_**執行過程記錄**_沒勾選時，全部元件上的紀錄Log都會失效，而紀錄Log只會影響到當前元件。
{% endtab %}

{% tab title="流程" %}
選擇一個主流程。
{% endtab %}

{% tab title="流程輸入" %}
選擇主流程後，會將該流程的表單欄位以及開始點的輸入帶入此頁籤。

{% hint style="info" %}
**若是沒有輸入任何值，系統默認為輸入空字串。**
{% endhint %}
{% endtab %}

{% tab title="流程輸出" %}
選擇流程後，會將該流程的結束點輸出帶入此頁籤。

選擇需要的輸出放入當前流程的流程變數中，以供後續元件使用。
{% endtab %}
{% endtabs %}

#### 子流程

呼叫當前主流程的子流程，當該流程進入結束元件時，本流程才會進續前進。

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。

異常時通過：當流程執行到該元件發生錯誤時，是否忽略錯誤使流程繼續往下進行。

紀錄Log：與[前面](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-can-shu-she-ding)介紹過的_**執行過程記錄**_作用相同，當_**執行過程記錄**_沒勾選時，全部元件上的紀錄Log都會失效，而紀錄Log只會影響到當前元件。
{% endtab %}

{% tab title="子流程" %}
選擇一個子流程。
{% endtab %}

{% tab title="子流程輸入" %}
選擇子流程後，會將該流程的表單欄位以及開始點的輸入帶入此頁籤。

{% hint style="info" %}
**若是沒有輸入任何值，系統默認為輸入空字串。**
{% endhint %}
{% endtab %}

{% tab title="子流程輸出" %}
選擇子流程後，會將該流程的結束點輸出帶入此頁籤。

選擇需要的輸出放入當前流程的流程變數中，以供後續元件使用。
{% endtab %}
{% endtabs %}

#### 程式碼

撰寫一段python程式碼讓資料中心/收集器執行。

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。

異常時通過：當流程執行到該元件發生錯誤時，是否忽略錯誤使流程繼續往下進行。

分散運算(開源版無此功能)：勾選此選項時，伺服器會將程式碼拋去群組為[分散運算](5.md#shou-ji-qi-shou-ji)的收集器執行。

紀錄Log：與[前面](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-can-shu-she-ding)介紹過的_**執行過程記錄**_作用相同，當_**執行過程記錄**_沒勾選時，全部元件上的紀錄Log都會失效，而紀錄Log只會影響到當前元件。
{% endtab %}

{% tab title="篩選" %}
篩選大致分為三個方面：

一、對現有變數做置換、取長度等，例如：轉成大寫、取開頭字元...

二、取得系統的一些預設欄位，例如：開單人、取得單號...

三、從[參數管理](6.md#can-shu-guan-li)取得系統參數

{% hint style="danger" %}
**篩選所建立的變數，只有當前元件能使用，並非流程變數！！！**
{% endhint %}
{% endtab %}

{% tab title="輸入" %}
輸入變數/字串/欄位值至python中，下面範例介紹如何使用：

假設python頁籤中所打的程式碼為

c = a + b

這時候輸入就要將 a 、b、c  帶入，如下圖

![](../.gitbook/assets/jie-tu-20200714-shang-wu-10.03.06.png)

最後我們會得到c = 12的結果

註1：將c帶入是為了能夠把c從python帶回流程。

註2：所有帶入的參數都是字串，因此需要在程式碼中自行轉換成所需的資料型態。
{% endtab %}

{% tab title="套件" %}
當python中有需要額外的套件，將套件名稱輸入在此。

系統上架流程時會進行判斷是否已經有此套件，若是沒有套件會從網路下載並安裝。

{% hint style="info" %}
如果沒有對外網路，可以自行架設pypi repository server，並修改系統設定。

系統會統整所有python點的此頁籤，將其表列在[流程列表](6.md#liu-cheng-lie-biao)的套件鈕。
{% endhint %}
{% endtab %}

{% tab title="Python" %}
撰寫所需的python程式碼。

程式碼最終結果的回傳不是依靠return，而是需要在最外層撰寫一個輸入頁籤的變數來接住結果，如下圖：

![a、b、c 三個變數在輸入頁籤輸入](../.gitbook/assets/jie-tu-20200714-shang-wu-10.11.48.png)
{% endtab %}

{% tab title="輸出" %}
取得python執行結果，並回寫流程變數。

{% hint style="warning" %}
只有經過輸入頁籤的變數才可在此進行輸出！
{% endhint %}
{% endtab %}
{% endtabs %}

#### 外部流程

呼叫已上架應用的流程，當該流程進入結束元件時，本流程才會進續前進。

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。

異常時通過：當流程執行到該元件發生錯誤時，是否忽略錯誤使流程繼續往下進行。

紀錄Log：與[前面](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-can-shu-she-ding)介紹過的_**執行過程記錄**_作用相同，當_**執行過程記錄**_沒勾選時，全部元件上的紀錄Log都會失效，而紀錄Log只會影響到當前元件。
{% endtab %}

{% tab title="外部流程" %}
選擇一個已上架流程。
{% endtab %}

{% tab title="流程輸入" %}
選擇主流程後，會將該流程的表單欄位以及開始點的輸入帶入此頁籤。

{% hint style="info" %}
**若是沒有輸入任何值，系統默認為輸入空字串。**
{% endhint %}
{% endtab %}

{% tab title="流程輸出" %}
選擇流程後，會將該流程的結束點輸出帶入此頁籤。

選擇需要的輸出放入當前流程的流程變數中，以供後續元件使用。
{% endtab %}
{% endtabs %}

#### 條件判斷

進行路線的判斷。

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。

紀錄Log：與[前面](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-can-shu-she-ding)介紹過的_**執行過程記錄**_作用相同，當_**執行過程記錄**_沒勾選時，全部元件上的紀錄Log都會失效，而紀錄Log只會影響到當前元件。
{% endtab %}

{% tab title="篩選" %}
篩選大致分為三個方面：

一、對現有變數做置換、取長度等，例如：轉成大寫、取開頭字元...

二、取得系統的一些預設欄位，例如：開單人、取得單號...

三、從[參數管理](6.md#can-shu-guan-li)取得系統參數

{% hint style="danger" %}
**篩選所建立的變數，只有當前元件能使用，並非流程變數！！！**
{% endhint %}
{% endtab %}

{% tab title="規則" %}
規則有下列幾點特性：

1. 規則會在拉線之後顯示。
2. 規則顯示的"FITEM-?"會呈現在各元件畫面的左上角。
3. 規則判斷都是if，也就是說，當有兩條規則成立時，會走後面那條。
4. 刪除線重建時，需要重新定義規則。
{% endtab %}
{% endtabs %}

#### 並行

讓流程能同時進行多項作業且互不影響。

{% hint style="warning" %}
**在並行後所產生的流程變數，其他分支是無法共用的。**
{% endhint %}

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。

紀錄Log：與[前面](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-can-shu-she-ding)介紹過的_**執行過程記錄**_作用相同，當_**執行過程記錄**_沒勾選時，全部元件上的紀錄Log都會失效，而紀錄Log只會影響到當前元件。
{% endtab %}

{% tab title="規則" %}
僅顯示目前拉了哪些線到其他元件，不用做任何設定。
{% endtab %}
{% endtabs %}

#### 並行匯集

可以將並行出去的分支收納回來，並選擇其中一條分之為主線，所有分支的流程變數皆會被收納，若有同名變數則以主線為主。

{% hint style="info" %}
**如果設計了匯集元件，必須等所有連接至匯集元件的分支都完成後，才會繼續進行後面流程。**
{% endhint %}

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。

紀錄Log：與[前面](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-can-shu-she-ding)介紹過的_**執行過程記錄**_作用相同，當_**執行過程記錄**_沒勾選時，全部元件上的紀錄Log都會失效，而紀錄Log只會影響到當前元件。
{% endtab %}

{% tab title="規則" %}
會顯示所有連接至匯集點的支線，請選擇其中一條作為主線，如果沒有進行勾選，則會以最後完成的支線作為主線。
{% endtab %}
{% endtabs %}

#### 動態並行

讓流程能對於同路線同時進行多次作業且互不影響。

{% hint style="warning" %}
**在動態並行後所產生的流程變數，其他分支是無法共用的。**
{% endhint %}

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。

紀錄Log：與[前面](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-can-shu-she-ding)介紹過的_**執行過程記錄**_作用相同，當_**執行過程記錄**_沒勾選時，全部元件上的紀錄Log都會失效，而紀錄Log只會影響到當前元件。
{% endtab %}

{% tab title="並行數量" %}
給予一個欄位或變數或固定值來決定並行次數。

選擇陣列時，輸入值範例如下：\
A,B,C,D ===> 並行四次

選擇數值時，輸入值範例如下：\
4  =====> 並行四次
{% endtab %}

{% tab title="陣列輸入" %}
選擇變數或欄位，進行陣列切割後分給各分支。

範例如下：\
變數A值為：ap-server,db-server,web-server\
變數B值為：10.1.1.1,10.1.1.2,10.1.1.3\
變數C值為：Jack,Ian

分成三條分之後，個字會拿到的值為：\
分支一： A(ap-server), B(10.1.1.1), (Jack)\
分支二：A(db-server), B(10.1.1.2), C(Ian)\
分支三：A(web-server), B(10.1.1.3), C("")
{% endtab %}
{% endtabs %}

#### 動態匯集

可以將動態並行出去的分支收納回來，最後一條完成的分支為主線，若有變數需要合併則須在輸出頁籤進行設定，否則以主線為主。

{% hint style="info" %}
**當所有分支都完成後，才會繼續進行後面流程。**
{% endhint %}

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。

紀錄Log：與[前面](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-can-shu-she-ding)介紹過的_**執行過程記錄**_作用相同，當_**執行過程記錄**_沒勾選時，全部元件上的紀錄Log都會失效，而紀錄Log只會影響到當前元件。

輸出json格式：將輸出頁籤的資料改為字串型態的json格式。

置換","字元：將輸出頁籤的變數值或欄位值的“,”(半形逗號)，替換成其他字元。
{% endtab %}

{% tab title="輸出" %}
選擇所有分支的共同欄位或變數進行合併，並輸出成另一個變數。

輸出範例如下：\
線路一： "A"\
線路二："B,D"\
線路三："X，Y"

合併變數輸出為："A,B,D,X，Y"\
若在設定頁籤勾選轉換成json，則輸出為："\['A', 'B,D', 'X，Y']"\
若在設定頁籤勾選置換","成"ooo"，則輸出為："A,BoooD,X，Y"
{% endtab %}
{% endtabs %}

#### 暫停

流程暫停n毫秒。

{% tabs %}
{% tab title="輸入" %}
帶入一個數字變數。
{% endtab %}

{% tab title="預設值" %}
若是輸入為空時，取預設值。
{% endtab %}
{% endtabs %}

#### 同系職務/權責

該元件與[組織圖](8.md#ldap-jian-shi-mian-fei-ji-qi-ye-ban-1)和[職務管理](8.md#jiao-se-guan-li)連動，透過輸入「使用者編號」及「職務名稱」，可找到距離該使用者所在組織上層最近的職務名稱，並回傳該職務的「使用者編號、組織編號」。

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。
{% endtab %}

{% tab title="輸入" %}
輸入一個職務名稱/權責名稱以及一個使用者編號。
{% endtab %}

{% tab title="輸出" %}
該元件會回傳透過組織圖找到的使用者編號與組織編號。
{% endtab %}
{% endtabs %}

#### 部門職務/權責

該元件與[組織圖](8.md#ldap-jian-shi-mian-fei-ji-qi-ye-ban-1)和[職務管理](8.md#jiao-se-guan-li)連動，透過輸入「部門編號」及「職務名稱」，可找到距離該部門下層最近的職務名稱，並回傳該職務的「使用者編號、組織編號」。

{% tabs %}
{% tab title="設定" %}
顯示名稱：給予該元件一個名稱，方便使用者檢視流程時辨識當前位置。
{% endtab %}

{% tab title="輸入" %}
輸入一個職務名稱/權責名稱以及一個部門編號。
{% endtab %}

{% tab title="輸出" %}
該元件會回傳透過組織圖找到的使用者編號與組織編號。
{% endtab %}
{% endtabs %}

### 新建/編輯流程頁面-子流程

進入子流程頁籤會看到子流程列表，子流程主要特性如下：

* 簡化並提高主流程可讀性
* 只能被主流程呼叫
* 子流程的元件類別與主流程相同，請參考上面介紹

## 已上架應用

管理已上架應用的介面。

### 已上架應用列表

當應用上架時，各項應用會顯示於此，並有以下功能介紹：

1. **下架**：下架一個已上架的應用
2. **篩選**：透過關鍵字搜尋、一次顯示資料筆數
3. **還原**：將篩選還原成預設值
4. **匯出**：將勾選的應用匯出，可以在應用設計進行匯入。
5. **修改：**修改該版本應用的備註。
6. **紀錄**：點擊之後，會顯示所有曾經上架過的應用(包含所有版本)。

### 已上架流程列表

點擊應用列表之後，會跳轉至該應用的流程列表。

流程列表功能介紹：

1. **啟用**：勾選流程後批次啟用。
2. **停用**：勾選流程後批次停用。當流程停用時，正在進行中的任務會中斷，且無法再次對該流程開單或推進。

仔細看上圖的話會發現，列表上的狀態、LOG、API欄位以及最後的設定，都是可以點擊的按鍵。

1. **狀態**：點擊之後會切換啟用與停用，效果跟上方列表的啟用停用相同。
2. **LOG**：開啟或關閉**執行過程記錄**，與之前[流程設計的參數設定](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-can-shu-she-ding)中介紹過的功能相同，這裡只是方便動態修改，不必重新上架。
3. **API**：開啟或關閉**應用程式介面**，同樣在[流程設計的參數設定](6.md#xin-jian-bian-ji-liu-cheng-ye-mian-can-shu-she-ding)中介紹過。
4. **設定**：分為欄位設定與API欄位，介紹如下：

**欄位設定：**目的在修改[自訂應用](7.md)中，列表所顯示的欄位。

**API欄位：**如果要透過API進行開單或推單，可以來這裡找到所需要的資料格式。

### 流程表單列表

點擊流程後可以進入表單列表，每次開單都會在此列表產生一筆資料。

當表單執行完畢後，會呈現灰色狀態，若未執行完畢或是產生錯誤時，資料的最後面會出現編輯的選項可以點擊。

點擊編輯後，會出現該張單當前的輸入與輸出，此時可以手動修改參數，修改完畢後點擊確定來推進流程。

## 排程設定

針對已上架的流程，可建立排程使其定期開單。

### 新建排程

進入排程列表頁面後，點擊新增按鈕即可建立新排程。

選擇一個已經上架的流程，如果該流程有設計表單，流程名稱後方會多出一個表單內容的按鍵。

點擊表單內容，會顯示這個流程所設計的表單，填寫完畢點選確定建立排程。之後排程都會依照填入的內容來開單。

### 編輯排程

已建立的排程會出現在排程列表中，狀態欄位下方同樣有啟用停用的按鍵可以快速操作。

點擊列表最後的編輯按鈕可以編輯排程。

## 參數管理

參數用於流程當中，流程可以在某些元件的篩選頁籤中，取得參數來使用，參數同樣可以進行批次匯入與匯出。

{% hint style="info" %}
當許多流程需要用到同一參數值時建議使用此功能，如伺服器 IP。
{% endhint %}

新增參數：

1. **名稱**：參數名稱。
2. **說明**：參數的說明。
3. **參數值**：參數的值。
4. **遮罩**：選擇為是時，參數值在列表中會顯示成 ⋯⋯

## 服務水準管理

服務水準規則用來監控指定的流程，當開單或推單時，欄位內容變化觸發了服務水準，此時會根據觸發條件去修改該單的燈號、開立事件，同時發信通知指定人員。

### 數值測量

介紹一下有特殊功用的欄位：

* **通知主旨**：寄信用的主旨。
* **通知內容**：寄信用的內文。
* **通知角色**：可選擇多個角色，這些角色的使用者都會被通知。
* **通知人**：可選擇多位使用者，這些使用者都會被通知。
* **通知開單人**：通知該單的開單人。

選擇一個已上架的流程後，選定一個欄位，當欄位符合提醒規則時，會發提醒通知，並且將單的燈號改為黃燈，如果符合違反規則，會發違反通知，且將單的燈號改為紅燈。

進階觸發條件可建可不建，與上方的規則是"且"的概念。



### 時間測量

時間測量與數值測量不同，這裡多了觸發條件與終止條件，達成觸發條件時，會開始計時，達成終止條件時，會結束計時。

計時超出提醒規則時，修改燈號、建立事件單、發信通知，超出違反時同樣做上述動作。

{% hint style="info" %}
**如果不設計觸發條件，則代表開單即觸發。**

**如果不設計終止條件，則代表關單才終止。**
{% endhint %}

##

---
description: >-
  在免費及企業版中，可在不同伺服器安裝 OMFLOW Collector ( 收集器
  )，資料中心可透過此功能向各收集器執行命令及收集資料，以達到分散運算、批次執行等功能。
---

# 資料收集

## 收集器管理

收集器分類清單，每個收集器可以被設定為其中一個分類，預設有兩個分類如下：

1. **未分類**：所有初次報到的「收集器」會預設分類於此。
2. **分散運算**：當流程運行至勾選「分散運算」的程式碼元件時，會選擇此分類其中一個收集器運行程式碼元件，詳細可參考 [_**應用管理 > 應用設計 >**_ ](6.md#cheng-shi-ma)_****_[_**程式碼元件**_](6.md#cheng-shi-ma)。

每個分類都可以設定修修改分類名稱及新增說明

**操作列表**：

1. **新增**：新增分類
2. **刪除**：刪除分類
3. **篩選**：搜尋關鍵字，並調整每頁顯示筆數
4. **還原**：取消搜尋關鍵字

**收集器清單**：點擊分類後，可進入收集器列表

**操作列表：**

1. **移動**：將收集移動至指定分類
2. **刪除**：將收集器刪除
3. **篩選**：搜尋關鍵字，並顯示每頁筆數
4. **還原**：取消搜尋關鍵字

被刪除的收集器如果還在持續運行，並向主機報到，會再次出現在列表中

**收集器資訊**

點擊收集器列表中任一個收集器，可顯示該收集器相關資訊，並設定收集器參數及檢視收集器已被派送之流程及資料。

**參數設定**

參數設定操作模式與_**應用設計**_相同，所有修改動作皆會即時同步到該收集器，提供已派送之流程使用。

## 收集器流程

所有收集器流程清單，可派送至收集器定時執行流程並將流程結束元件的輸出資料傳回資料中心。

1. **新增**：與 _**應用管理 > 應用設計**_ 類似，可建立任意流程並指派收集器執行。
2. **刪除**：刪除勾選流程。
3. **複製**：複製勾選流程並建立為新流程。
4. **派送**：指定勾選的收集器執行此流程。
5. **執行**：設定流程執行變數、排程，及執行的收集器。
6. **數據**：檢視該流程所收集到的資料，並以折線圖顯現。

{% hint style="info" %}
流程需要先派送至收集器後才能設定排程執行，可同時在多個收集器上設定相同排程。
{% endhint %}

{% hint style="info" %}
數據資料來源為該派送流程「結束」的輸出變數，詳 [_**應用設計 > 結束**_](6.md#jie-shu)。
{% endhint %}

## 收集器套件

當收集器在有對外網路的環境下能自行安裝流程所需套件，無需使用者手動安裝。若收集器本身沒有對外網路，有以下兩個建議：

1. 若環境中有設立私有PIP Server，可在系統設定設置位置。

&#x20;   2\. 也可根據該Collector所需執行的收集器流程自行手動下載，以下為內建收集器流程所需套件清單：

```
aiosnmp
asyncio
cx_Oracle
mysql
paramiko
psutil
psycopg2
pyodbc
requests
```

## 收集器API

建立收集器專屬API，使外部可直接對收集器呼叫流程並將流程結束元件的輸出傳回資料中心，每次呼叫僅會執行一次。

{% hint style="info" %}
由於資安考量，收集器預設僅接受自身及資料中心API呼叫。如需要從外部

呼叫，須登入收集器伺服器並對Apache下的 httpd.conf 新增信任IP。
{% endhint %}

{% hint style="info" %}
數據資料來源為該派送流程「結束」的輸出變數，詳 [_**應用設計 > 結束**_](6.md#jie-shu)
{% endhint %}

## 事件管理

所有事件都會集中至此進行管理。

事故規則清單：當事件產生時，系統會檢查事件規則是否符合並產生事故單，並有幾點須注意如下：

* 檢查順序由上至下
* 當其中一個事件規則符合時，便不再檢查

新增事故規則：設定事故單產生時的欄位內容，並根據「事故觸發條件」決定是否產生事故單下：

1. **時間符合**：當此規則在指定時間範圍內達到指定符合次數時產生事件，如 1 天內符合 3 次，若空白，則每符合任 1 次都會產生事故單。
2. **欄位條件**：當所有指定欄位判定結果為真時視為符合。

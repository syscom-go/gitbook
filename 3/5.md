# HTTPSの有効化

## Linux <a href="#linux" id="linux"></a>

### Ubuntuの場合

### STEP1、HTTPS証明書を作成する

opensslをインストール

```
apt-get install openssl
```

sslディレクトリを作成

```
cd /etc/apache2/
mkdir ssl
```

証明書を作成

```
openssl req -new -x509 -days 365 -nodes -out /etc/apache2/ssl/apache.pem -keyout /etc/apache2/ssl/apache.key​​
```

<figure><img src="../.gitbook/assets/2020-07-17_092419.png" alt=""><figcaption><p>証明書作成例</p></figcaption></figure>

### STEP2、django.confを変更する

```
/etc/apache2/sites-available/
vi django.conf
```

次のコードを追加

```
SSLEngine On
SSLCertificateFile /etc/apache2/ssl/apache.pem
SSLCertificateKeyFile /etc/apache2/ssl/apache.key
```

**Port : \*:80から\*:443に変更**

<figure><img src="../.gitbook/assets/2020-07-17_093528.png" alt=""><figcaption><p>django.conf 変更例</p></figcaption></figure>

### STEP3、settings.pyの変更

```
LOCAL_PROTOCOL = "http"
改為
LOCAL_PROTOCOL = "https"
```

### STEP4、SSLモジュールを有効にし、サービスを再起動する <a href="#di-san-bu-zhou-qi-yong-ssl-mo-zu" id="di-san-bu-zhou-qi-yong-ssl-mo-zu"></a>

```
a2enmod ssl
systemctl restart omflow_server
```

### STEP5、OMFLOWのWebページを確認する <a href="#di-si-bu-zhou-jian-cha-omflow-wang-ye" id="di-si-bu-zhou-jian-cha-omflow-wang-ye"></a>

**https://\<SERVER IP>:443/** と入力

<figure><img src="../.gitbook/assets/2020-07-17_094804.png" alt=""><figcaption><p>OMFLOWのWebページが正常に表示されることを確認</p></figcaption></figure>


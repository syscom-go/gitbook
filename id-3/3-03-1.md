# アプリとプロセスの作成

## アプリとプロセスの作成

アプリケーションとシンプルなプロセスの構築例を説明します。

### アプリケーションの作成

```
位置：［メインメニュー］＞アプリケーション管理＞アプリケーション設計＞新規
```

メイン画面の上に**新規**ボタンをクリックして、「テスト」と入力します。作成したアプリケーションがリストに表示されます。

### プロセス作成

```
位置：［メインメニュー］＞アプリケーション管理＞アプリケーション設計＞［アプリケーション名］
```

作成したアプリケーションをクリックして、プロセスリスト画面に入ります。メイン画面の上に**新規**ボタンをクリックして、**フォームプロセス選択**で、最初のプロセスを作成します。

プロセス作成後、プロセスの**パラメータ設定**画面に切り替わりますので、以下の項目を入力してください。\
● プロセス名：テストフロー\
● APIパス：practice-flow

> ※ この例では、他のチェックに入れた項目を変更しません。詳細については、【アプリケーション管理 > パラメーター設定設定】セクションを参照してください。

### フォーム設計

```
位置：［メインメニュー］＞アプリケーション管理＞アプリケーション設計＞［アプリケーション名］＞［アプリケーション名］＞フォーム設計
```

「フォーム設計」タブをクリックすると、空白のフォームが表示されます。メイン画面の上の**ハーフブロック**ボタンを2回クリックします。

左ブロックの**＋**ボタンをクリックし、以下のフィールドを追加します：\
● タイトル\
● 入力

右ブロックの**＋**ボタンをクリックし、以下のフィールドを追加します：\
● 状態\
● レベル

先ほど作成した**状態**フィールドで、［**齒車**］ボタンをクリックし**オプション**タブに切り替えて以下のオプションを追加します：

| 值 | 表示文字 |
| - | ---- |
| 1 | 新規   |
| 2 | 審査   |
| 3 | 承認   |
| 0 | 拒否   |

### フロー設計

```
位置：［メインメニュー］＞アプリケーション管理＞アプリケーション設計＞［アプリケーション名］＞［アプリケーション名］＞フロー設計
```

「フロー設計」タブをクリックすると、デフォルトのフローが表示されます。このフローは意図的にクローズさないロジックで設計され、引き続きこのフローを修正します：

> 練習シナリオ：\
> ● 作成後“タイトル”と“入力”を加えて入力フィールドに入力し、ユーザーがチェックできるようにします\
> ● ユーザーが正しいことを確認したら、状態を承認に変更し、フローを完了します\
> ● ユーザーが承認以外の状態を選択した場合は、再び入力に戻ります

#### コンポーネントの追加

上の**作成**ボタンをクリックし、**コード**コンポーネントにチェックを入れます

#### コンポーネントのリンク

リンクする前に、フロー設計の3種類の操作を紹介します。

**コンポーネントのドラッグ＆ドロップ**

> ● ［コンポーネント］をドラッグ＆ドロップ ● マウスを動かす

**リンクの作成**

> ● 起点としての［コンポーネント］をクリックし、操作状態に入ります\
> ● 操作状態で「左、右、下」の任意の**○**ボタンを緑になるまでクリックします\
> ● マウスを終点となる［コンポーネント］の上に移動します\
> ● 表示された任意の**○**ボタンをクリックします

**リンクの削除**

> ● 起点としての［コンポーネント］をクリックし、操作状態に入ります\
> ● 操作状態で「左、右、下」の任意の**○**ボタンを緑になるまでクリックします\
> ● 方法1：もう一度緑になった**○**ボタンをクリックします\
> ● 方法2：マウスを終点となる［コンポーネント］の上に移動し、終点とリンクしている**○**ボタンをクリックします

操作を理解した上で、以下の目的を完成してください。\
● 「開始、入力」の間のリンクを削除します\
● 先ほど作成した「実行（コード）」のコンポーネントを「開始、入力」の間にドラッグ＆ドロップします\
● 順番にコンポーネントをリンクします：開始 → 実行 → 入力 → 判斷 → 完了\
● 「判断」のコンポーネントにさらにリンクを作成します：判断 → 入力

#### コンポーネントの設定件

フローチャートの構成が完成したら、各コンポーネントの機能、入力、出力を設定します。

**「開始」コンポーネント**

```
            位置：フロー設計＞〔開始コンポーネント］＞［齒車］＞入力＞作成
```

フローチャートの\[開始コンポーネント]をクリックして操作状態に入り、上記の順番で指定された場所を見つけ、以下の設定を完了します：

| データ入力      | 引数名            | 說明 |
| ---------- | -------------- | -- |
| success    | result         |    |
| フィールド：タイトル | title          |    |
| 欄フィールド：入力  | input          |    |
|            | python\_result |    |

> ※ これはプロセスの開始変数であり、他のコンポーネントでも可能です。

**「コード」コンポーネント**

**「入力」タブ**

```
            位置：フロー設計＞〔コード コンポーネント］＞［齒車］＞入力＞作成
```

フローチャートの\[開始コンポーネント]をクリックして操作状態に入り、上記の順番で指定された場所を見つけ、以下の設定を完了します：

| データ入力    | 引数名 | 說明 |
| -------- | --- | -- |
| 変数：title | a   |    |
| 変数：input | b   |    |
|          | c   |    |

> ※ a、b、cは、フローでpythonコードに持ち込む変数で、ここで作成した変数のみフローに持ち込むことが可能です。

**「Python」タブ**

```
            位置：フロー設計＞〔コード コンポーネント］＞［齒車］＞Python
```

此様々な顧客のニーズを満足するため、ここでは自分でPythonコードを入力することができます、この例では、mergeInputの方法を定義し、a、bの変数を文字列の組み合わせにより、最後に合計の結果を返します。詳細は下記の例を参照してください。

```python
def mergeInput(title, text):
    ans = title + text
    return ans


c = mergeInput(a,b)
```

> ※ プロセスから入力される変数はすべてタイプ**string**です。

**「出力」タブ**

```
            位置：フロー設計＞〔コード コンポーネント］＞［齒車］＞出力
```

ここでは、出力タブのどの変数をプロセス変数に書き戻すかを決めるため、下記の設定を完成してください。

| データ入力 | 引数名            | 說明 |
| ----- | -------------- | -- |
| 変数：c  | python\_result |    |

**「フォーム入力」コンポーネント**

フォーム入力の主な機能は、プロセスを停止させ、ユーザーの手動処理により、再度プロセスを動かすことです。 ここでは、プロセスがこのコンポーネントに入るたびに、**状態**フィールドの値が**審査**に変更されるように設定します。

| 引数名 | フィールド設定  | 說明 |
| --- | -------- | -- |
| 2   | フィールド：状態 |    |

**「条件判断」コンポーネント**

このコンポーネントは、複数のリンクを設定し、条件によってどのルートに進むかを決めます。

| 次のコンポーネント    | 変数またはフィールド | 条件      | 值    |
| ------------ | ---------- | ------- | ---- |
| 入力(FITEM\_2) | フィールド: 状態  | ノットイコール | 3    |
| 終了(FITEM\_4) | フィールド: 状態  |         | イコール |

> ※ 条件判断要素が複数の経路を同時に満たす場合、一番下の経路を優先します。

### 保存

フロー設計が完了したら、メイン画面右上の**保存**ボタンをクリックします。

> ※ プロセスを保存してもすぐには反映されないため、反映させるには**リリース**を実行する必要があります。

### リリース

```
位置：［メインメニュー］＞アプリケーション管理＞アプリケーション設計
```

**アプリケーション設計**をクリックしてアプリケーションリストに戻り、先ほど作成したアプリケーションを選択し、メイン画面上部の**リリース**ボタンをクリックします。 **新しいアプリのリリース**を選択し、**確認**をクリックします。

すでにこのアプリをリリースした場合は、**既存アプリと置き換える**を選択してください。

> ※ アプリのサイズによってリリースに時間がかかる場合があるので、しばらくお待ちください。

### フォームの作成

```
位置：［メインメニュー］＞Apps＞〔アプリケーション名］＞〔プロセス名］
```

リリース完了後、上記の場所に該当のプロセスの情報リストがありますので、**追加**ボタンをクリックしてフォームを作成できます。
